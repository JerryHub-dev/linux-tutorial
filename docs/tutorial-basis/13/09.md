# 本章练习

## 情景模拟题 1

将本服务的账户分开管理，

- 分为单纯邮件使用者：将该账户加入名为 mail 的初始群组，且此账户不可使用 bash 等 shell 登陆系统。
- 可登陆系统账户：将该账户加入 youcan 的次要群组

练习期望：

- 目标：了解 `/sib/nologin` 的用途
- 前提：可自行观察使用者是否已经建立等问题
- 需求：需了解 useradd、groupadd 等指令的用法

```bash
# 1. 检查两个群组是否存在，不存在则建立
grep mail /etc/group
grep youcan /etc/group
groupadd youcan

# 2. 创建邮件账户，可以准备脚本来处理
vim popuser.sh
#!/bin/bash
for username in pop1 pop2 pop3
do
	# -g 初始群组； -s 指定 bash； -M 不要创建家目录
	useradd -g mail -s /sbin/nologin -M $username
	echo $username | passwd --stdin $username		# 将密码设置为账户相同
done

sh popuser.sh

# 3. 建立一般账户，同样适用脚本创建
vim loginuser.sh
#!/bin/bash
for username in pop1 pop2 pop3
do
	# -g 初始群组； -s 指定 bash； -M 不要创建家目录
	useradd -G youcan -s /bin/login $username
	echo $username | passwd --stdin $username		# 将密码设置为账户相同
done

sh loginuser.sh
```

## 简答题部分

- root 的 UID 与 GID 是多少？基于这个理由，让 test 这个账户具有 root 权限，怎么做？

  都为 0，可以直接修改 `/etc/passwd` 中 test 账户的 UID 和 GID 字段变成 0

- 如何将一个账户暂时停掉？让该账户无法登录？

  由于是暂时失效，不能使用 userdel 来删除，有以下几种方式

  - 将 `/etc/passwd` 的 shell 字段修改为 `/sbin/nologin`
  - 将 `/ec/shadow` 的密码字段，内容前增加一个 !，让密码失效
  - 将 `/etc/shadow` 第 8 字段关于账户失效日期，设置为小于目前的日期数字